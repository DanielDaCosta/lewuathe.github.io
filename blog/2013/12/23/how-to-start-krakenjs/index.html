
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to Start KrakenJS - The first cry of Atom</title>
  <meta name="author" content="Kai Sasaki">

  
  <meta name="description" content="In this november, Paypal released KrakenJS which is web application framework based on Connect, Express. http://krakenjs.com/ I had a chance to using &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="How to start KrakenJS - The first cry of Atom" >
<meta property="og:description" content="In this november, Paypal released KrakenJS which is web application framework based on Connect, Express. http://krakenjs.com/ I had a chance to using &hellip;" />
<meta property="og:url" content="http://lewuathe.com" />
<meta property="og:image" content="http://lewuathe.github.io/images/site_image.png" />
<meta property="og:author" content="lewuathe" />
<meta property="og:site_name" content="The first cry of Atom" />
<meta property="og:locale" content="ja_JP" />
<meta property="og:type" content="article" />
<meta property="fb:app_id" content="212934732101925" />


  
  <link rel="canonical" href="http://lewuathe.github.io/blog/2013/12/23/how-to-start-krakenjs">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="The first cry of Atom" type="application/atom+xml">
  <link href="/stylesheets/data-table.css" rel="stylesheet" type="text/css" />
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44055098-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The first cry of Atom</a></h1>
  
    <h2>The people who are crazy enough to think thay can change the world, are the ones who do</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lewuathe.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about.html">About</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://fotologue.jp/lewuathe">Pictures</a></li>
  <li><a href="https://github.com/Lewuathe">GitHub</a></li>
  <li><a href="https://twitter.com/Lewuathe">Twitter</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">How to Start KrakenJS</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-23T11:55:00+09:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In this november, Paypal released KrakenJS which is web application framework based on Connect, Express.</p>

<p><a href="http://krakenjs.com/">http://krakenjs.com/</a></p>

<p>I had a chance to using this framework at the ending of this year. So I want to inform the facility of this framwork.</p>

<!-- more -->


<p><strong>This article was written for <a href="http://www.adventar.org/calendars/56">Node.js advent calendar</a> 24th day.</strong> Please read previous articles.</p>

<h2>Getting started</h2>

<h3>Install generator</h3>

<p>Kraken uses <a href="http://yeoman.io/">Yeoman</a> for building the bootstrap of application. So first, you need to install generator.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo npm install -g generator-kraken</span></code></pre></td></tr></table></div></figure>


<h3>Create skelton</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ yo kraken
</span><span class='line'>
</span><span class='line'>     ,'""`.
</span><span class='line'>    / _  _ \
</span><span class='line'>    |(@)(@)|   Release the Kraken!
</span><span class='line'>    )  __  (
</span><span class='line'>   /,'))((`.\
</span><span class='line'>  (( ((  )) ))
</span><span class='line'>   `\ `)(' /'
</span><span class='line'>
</span><span class='line'>[?] Application name: MyTestApp
</span><span class='line'>[?] Description: My first kraken application
</span><span class='line'>[?] Author: Kai Sasaki
</span><span class='line'>[?] Use RequireJS? (Y/n) n</span></code></pre></td></tr></table></div></figure>


<p>Write down simple configurations of your application. <a href="http://requirejs.org/">RequireJS</a> is a JavaScript file and module loader.
If you want to optimize loading of module scripts, this is good option. This command installs dependencies automatically.
So you don&rsquo;t need to type <code>npm install</code> again. After only these commands, you can start your application server.</p>

<h3>Start your server</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cd MyTestApp
</span><span class='line'>$ npm start
</span><span class='line'>npm WARN package.json mytestapp@0.0.1 No repository field.
</span><span class='line'>
</span><span class='line'>&gt; mytestapp@0.0.1 start /Users/sasakiumi/MyTestApp
</span><span class='line'>&gt; node index.js
</span><span class='line'>
</span><span class='line'>Multipart body parsing will be disabled by default in future versions. To enable, use `middleware:multipart` configuration.
</span><span class='line'>connect.multipart() will be removed in connect 3.0
</span><span class='line'>visit https://github.com/senchalabs/connect/wiki/Connect-3.0 for alternatives
</span><span class='line'>connect.limit() will be removed in connect 3.0
</span><span class='line'>Listening on 8000</span></code></pre></td></tr></table></div></figure>


<p>Congratulations!! You can see your application through web browser.</p>

<p><img src="/images/posts/2013-12-23-kraken/startpage.png" alt="start page" /></p>

<h2>Structure</h2>

<p>Directory structure is very simple. It is based on MVC framework which you might used to be.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/config
</span><span class='line'>Application and middleware configuration
</span><span class='line'>
</span><span class='line'>/controllers
</span><span class='line'>Routes and logic
</span><span class='line'>
</span><span class='line'>/lib
</span><span class='line'>Custom developer libraries and other code
</span><span class='line'>
</span><span class='line'>/locales
</span><span class='line'>Language specific content bundles
</span><span class='line'>
</span><span class='line'>/models
</span><span class='line'>Models
</span><span class='line'>
</span><span class='line'>/public
</span><span class='line'>Web resources that are publicly available
</span><span class='line'>
</span><span class='line'>/public/templates
</span><span class='line'>Server and browser-side templates
</span><span class='line'>
</span><span class='line'>/tests
</span><span class='line'>Unit and functional test cases
</span><span class='line'>
</span><span class='line'>index.js
</span><span class='line'>Application entry point </span></code></pre></td></tr></table></div></figure>


<p>For a characteristic, locale settings are prepared as default. You can make your app international easily.
Because KrakenJS is based on Express, you can develop your own Connect stack as you did before.
In the <code>index.js</code> file, some functions which are prepared for each request statuses. These description is easier to understand
than original connect framework. For example, <code>requestBeforeRout</code> means that this function will be called after request before rouring logic.
It&rsquo;s simple, isn&rsquo;t it?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'use strict';
</span><span class='line'> 
</span><span class='line'>var kraken = require('kraken-js'),
</span><span class='line'>    app = {};
</span><span class='line'> 
</span><span class='line'>// Fired when an app configures itself
</span><span class='line'>app.configure = function (nconf, next) {
</span><span class='line'>    next(null);
</span><span class='line'>};
</span><span class='line'> 
</span><span class='line'>// Fired at the beginning of an incoming request
</span><span class='line'>app.requestStart = function (server) { };
</span><span class='line'> 
</span><span class='line'>// Fired before routing occurs
</span><span class='line'>app.requestBeforeRoute = function (server) { };
</span><span class='line'> 
</span><span class='line'>// Fired after routing occurs
</span><span class='line'>app.requestAfterRoute = function requestAfterRoute(server) { };
</span><span class='line'> 
</span><span class='line'>kraken.create(app).listen(function (err) {
</span><span class='line'>    if (err) { console.error(err); }
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>


<h2>Modules</h2>

<p>KrankenJS can include other utility modules for enterprise use. These are also made by Paypal.</p>

<ul>
<li><a href="https://github.com/paypal/lusca">Lusca</a>: Application security for express apps.</li>
<li><a href="https://github.com/paypal/makara">Makara</a>: An i18n module for Dust.js.</li>
<li><a href="https://github.com/paypal/adaro">Dust</a>: A Dust.js view renderer for express</li>
<li><a href="https://github.com/paypal/kappa">Kappa</a>: A hierarchical npm-registry proxy</li>
</ul>


<p>In this article, I won&rsquo;t write the detail of these modules. But these might be made for enterprise applications.
Lusca and Kappa is necessary for secure and private development environment.</p>

<h2>Examples</h2>

<ul>
<li><a href="https://github.com/lmarkus/Kraken_Example_Shopping_Cart">Kraken Shopping Cart</a></li>
<li><a href="https://github.com/lensam69/Kraken_Example_Localization">Localization</a></li>
<li><a href="https://github.com/lmarkus/Kraken_Example_Configuration">Custom Configuration</a></li>
<li><a href="https://github.com/lensam69/Kraken_Example_Custom_Middleware">Middle ware</a></li>
</ul>


<p>In this one month, the number of examples are increasing. Would you like to add your example to this list?</p>

<h2>Try it!</h2>

<p>KrakenJS is on the way of development, if anything, is only on the first stage of a thing.
I could develop an application by using KrakenJS in 2 weeks. It&rsquo;s easy to use, user friendly, and
it has nice libraries. I&rsquo;ll bet this framework can accelerate your speed of development.</p>

<p>Let&rsquo;s try it!!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Kai Sasaki</span></span>

      








  


<time datetime="2013-12-23T11:55:00+09:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/express/'>Express</a>, <a class='category' href='/blog/categories/kraken/'>Kraken</a>, <a class='category' href='/blog/categories/node/'>Node</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://lewuathe.github.io/blog/2013/12/23/how-to-start-krakenjs/" data-via="Lewuathe" data-counturl="http://lewuathe.github.io/blog/2013/12/23/how-to-start-krakenjs/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/12/17/making-custom-segue/" title="Previous Post: Making custom segue">&laquo; Making custom segue</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/12/30/reference-configuration-library-in-nodejs/" title="Next Post: Reference configuration library in nodejs">Reference configuration library in nodejs &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/10/patterns-about-bfs-in-commetitive-programming/">Patterns About BFS in Competitive Programming</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/08/opensslfalsecui-ruo-xing-wodu-nta/">Heart Bleedを読んだ</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/29/wen-quan-jin-nite/">温泉津にて</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/25/shan-toshou-duan-tomu-de-to/">禅と手段と目的と</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/19/next-tile-on-tempai/">Next Tile on Tempai</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Kai Sasaki -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/ja_JP/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
